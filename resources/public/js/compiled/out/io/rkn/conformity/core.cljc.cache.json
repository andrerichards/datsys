["^ ","~:rename-macros",["^ "],"~:renames",["^ "],"~:externs",["^ ","~$Error",["^ "]],"~:use-macros",["^ "],"~:excludes",["~#set",[]],"~:name","~$io.rkn.conformity.core","~:imports",null,"~:requires",["^ ","~$ds","~$dat.sync.db","^<","^<","~$datascript","~$datascript.core","^>","^>"],"~:uses",null,"~:defs",["^ ","~$reduce-norms",["^ ","~:protocol-inline",null,"~:meta",["^ ","~:file","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","~:line",170,"~:column",7,"~:end-line",170,"~:end-column",19,"~:arglists",["~#list",["~$quote",["^J",[["~$acc","~$conn","~$norm-attr","~$norm-map","~$norm-names"]]]]],"~:doc","Reduces norms from a norm-map specified by a seq of norm-names into\n  a transaction result accumulator"],"^7","~$io.rkn.conformity.core/reduce-norms","~:variadic",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",19,"~:method-params",["^J",[["^L","^M","^N","^O","^P"]]],"~:protocol-impl",null,"~:arglists-meta",["^J",[null,null]],"^F",1,"^E",170,"^G",170,"~:max-fixed-arity",5,"~:fn-var",true,"^I",["^J",["^K",["^J",[["^L","^M","^N","^O","^P"]]]]],"^Q","Reduces norms from a norm-map specified by a seq of norm-names into\n  a transaction result accumulator"],"~$has-function?",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",49,"^F",7,"^G",49,"^H",20,"^I",["^J",["^K",["^J",[["~$db","~$fn-name"]]]]],"^Q","Returns true if a database has a function named fn-name"],"^7","~$io.rkn.conformity.core/has-function?","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",20,"^T",["^J",[["^Z","^["]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",49,"^G",49,"^W",2,"^X",true,"^I",["^J",["^K",["^J",[["^Z","^["]]]]],"^Q","Returns true if a database has a function named fn-name"],"~$ensure-conformity-schema",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",62,"^F",7,"^G",62,"^H",31,"^I",["^J",["^K",["^J",[["^M","~$conformity-attr"]]]]],"^Q","Ensure that the two attributes and one transaction function\n  required to track conformity via the conformity-attr keyword\n  parameter are installed in the database."],"^7","~$io.rkn.conformity.core/ensure-conformity-schema","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",31,"^T",["^J",[["^M","^12"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",62,"^G",62,"^W",2,"^X",true,"^I",["^J",["^K",["^J",[["^M","^12"]]]]],"^Q","Ensure that the two attributes and one transaction function\n  required to track conformity via the conformity-attr keyword\n  parameter are installed in the database."],"~$ensure-conforms",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",198,"^F",7,"^G",198,"^H",22,"^I",["^J",["^K",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]]]],"^Q","Ensure that norms represented as datoms are conformed-to (installed), be they\n  schema, data or otherwise.\n\n      conformity-attr  (optional) the keyword name of the attribute used to\n                       track conformity\n      norm-map         a map from norm names to data maps.\n                       a data map contains:\n                         :txes     - the data to install\n                         :txes-fn  - An alternative to txes, pointing to a\n                                     symbol representing a fn on the classpath that\n                                     will return transactions.\n                         :requires - (optional) a list of prerequisite norms\n                                     in norm-map.\n      norm-names       (optional) A collection of names of norms to conform to.\n                       Will use keys of norm-map if not provided.\n\n  On success, returns a vector of maps with values for :norm-name, :tx-index,\n  and :tx-result for each transaction that improved the db's conformity.\n\n  On failure, throws an ex-info with a reason and data about any partial\n  success before the failure.","~:top-fn",["^ ","^S",false,"^W",4,"^T",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^I",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^V",["^J",[null,null,null]]]],"^7","~$io.rkn.conformity.core/ensure-conforms","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",22,"^15",["^ ","^S",false,"^W",4,"^T",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^I",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^V",["^J",[null,null,null]]],"^T",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^U",null,"^V",["^J",[null,null,null]],"^F",1,"^E",198,"^G",198,"^W",4,"^X",true,"^I",["^J",[["^M","^O"],["^M","^O","^P"],["^M","^12","^O","^P"]]],"^Q","Ensure that norms represented as datoms are conformed-to (installed), be they\n  schema, data or otherwise.\n\n      conformity-attr  (optional) the keyword name of the attribute used to\n                       track conformity\n      norm-map         a map from norm names to data maps.\n                       a data map contains:\n                         :txes     - the data to install\n                         :txes-fn  - An alternative to txes, pointing to a\n                                     symbol representing a fn on the classpath that\n                                     will return transactions.\n                         :requires - (optional) a list of prerequisite norms\n                                     in norm-map.\n      norm-names       (optional) A collection of names of norms to conform to.\n                       Will use keys of norm-map if not provided.\n\n  On success, returns a vector of maps with values for :norm-name, :tx-index,\n  and :tx-result for each transaction that improved the db's conformity.\n\n  On failure, throws an ex-info with a reason and data about any partial\n  success before the failure."],"~$default-conformity-attribute-for-db",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",56,"^F",7,"^G",56,"^H",42,"^I",["^J",["^K",["^J",[["^Z"]]]]],"^Q","Returns the default-conformity-attribute for a db."],"^7","~$io.rkn.conformity.core/default-conformity-attribute-for-db","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",42,"^T",["^J",[["^Z"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",56,"^G",56,"^W",1,"^X",true,"^I",["^J",["^K",["^J",[["^Z"]]]]],"^Q","Returns the default-conformity-attribute for a db."],"~$speculative-conn",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",247,"^F",8,"^G",247,"^H",24,"~:private",true,"^I",["^J",["^K",["^J",[["^Z"]]]]]],"^1:",true,"^7","~$io.rkn.conformity.core/speculative-conn","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",24,"^T",["^J",[["^Z"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",247,"^G",247,"^W",1,"^X",true,"^I",["^J",["^K",["^J",[["^Z"]]]]]],"~$get-norm",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",159,"^F",7,"^G",159,"^H",15,"^I",["^J",["^K",["^J",[["^M","^O","~$norm-name"]]]]],"^Q","Pull from `norm-map` the `norm-name` value. If the norm contains a\n  `txes-fn` key, allow processing of that key to stand in for a `txes`\n  value. Returns the value containing transactable data."],"^7","~$io.rkn.conformity.core/get-norm","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",15,"^T",["^J",[["^M","^O","^1="]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",159,"^G",159,"^W",3,"^X",true,"^I",["^J",["^K",["^J",[["^M","^O","^1="]]]]],"^Q","Pull from `norm-map` the `norm-name` value. If the norm contains a\n  `txes-fn` key, allow processing of that key to stand in for a `txes`\n  value. Returns the value containing transactable data."],"~$conforms-to?",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",90,"^F",7,"^G",90,"^H",19,"^I",["^J",["^K",["^J",[["^Z","~$norm","~$tx-count"],["^Z","^12","^1@","^1A"]]]]],"^Q","Does database have a norm installed?\n\n      conformity-attr  (optional) the keyword name of the attribute used to\n                       track conformity\n      norm             the keyword name of the norm you want to check\n      tx-count         the count of transactions for that norm","^15",["^ ","^S",false,"^W",4,"^T",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^I",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^V",["^J",[null,null]]]],"^7","~$io.rkn.conformity.core/conforms-to?","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",19,"^15",["^ ","^S",false,"^W",4,"^T",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^I",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^V",["^J",[null,null]]],"^T",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",90,"^G",90,"^W",4,"^X",true,"^I",["^J",[["^Z","^1@","^1A"],["^Z","^12","^1@","^1A"]]],"^Q","Does database have a norm installed?\n\n      conformity-attr  (optional) the keyword name of the attribute used to\n                       track conformity\n      norm             the keyword name of the norm you want to check\n      tx-count         the count of transactions for that norm"],"~$with-conforms",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",252,"^F",7,"^G",252,"^H",20,"^I",["^J",["^K",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]]]],"^Q","Variation of ensure-conforms that speculatively ensures norm are conformed to\n\n   On success, returns a map with:\n     :db     the resulting database that conforms the the provided norms\n     :result a vector of maps with values for :norm-name, :tx-index,\n             and :tx-result for each transaction that improved the db's conformity.\n\n   On failure, throws an ex-info with a reason and data about any partial\n   success before the failure.","^15",["^ ","^S",false,"^W",4,"^T",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^I",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^V",["^J",[null,null,null]]]],"^7","~$io.rkn.conformity.core/with-conforms","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",20,"^15",["^ ","^S",false,"^W",4,"^T",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^I",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^V",["^J",[null,null,null]]],"^T",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^U",null,"^V",["^J",[null,null,null]],"^F",1,"^E",252,"^G",252,"^W",4,"^X",true,"^I",["^J",[["^Z","^O"],["^Z","^O","^P"],["^Z","^12","^O","^P"]]],"^Q","Variation of ensure-conforms that speculatively ensures norm are conformed to\n\n   On success, returns a map with:\n     :db     the resulting database that conforms the the provided norms\n     :result a vector of maps with values for :norm-name, :tx-index,\n             and :tx-result for each transaction that improved the db's conformity.\n\n   On failure, throws an ex-info with a reason and data about any partial\n   success before the failure."],"~$default-conformity-attribute",["^ ","^7","~$io.rkn.conformity.core/default-conformity-attribute","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",7,"^F",1,"^G",7,"^H",47,"~:deprecated",true,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",7,"^F",19,"^G",7,"^H",47,"^1G",true],"~:tag","~$cljs.core/Keyword"],"~$index-attr",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",36,"^F",7,"^G",36,"^H",17,"^I",["^J",["^K",["^J",[["^12"]]]]],"^Q","Returns the index-attr corresponding to a conformity-attr"],"^7","~$io.rkn.conformity.core/index-attr","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",17,"^T",["^J",[["^12"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",36,"^G",36,"^W",1,"^X",true,"^I",["^J",["^K",["^J",[["^12"]]]]],"^Q","Returns the index-attr corresponding to a conformity-attr"],"~$ensure-norm-tx-txfn",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",9,"^F",6,"^G",9,"^H",25],"^7","~$io.rkn.conformity.core/ensure-norm-tx-txfn","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",25,"^T",["^J",[["^Z","^N","^1@","^1J","~$index","~$tx"]]],"^U",null,"^V",["^J",[]],"^F",1,"^E",9,"^G",9,"^W",6,"^X",true,"^I",null,"^Q","Transaction function to ensure each norm tx is executed exactly once"],"~$reduce-txes",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",118,"^F",7,"^G",118,"^H",18,"^I",["^J",["^K",["^J",[["^L","^M","^N","^1=","~$txes","~$sync-schema-timeout"]]]]],"^Q","Reduces the seq of transactions for a norm into a transaction\n  result accumulator"],"^7","~$io.rkn.conformity.core/reduce-txes","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",18,"^T",["^J",[["^L","^M","^N","^1=","^1Q","^1R"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",118,"^G",118,"^W",6,"^X",true,"^I",["^J",["^K",["^J",[["^L","^M","^N","^1=","^1Q","^1R"]]]]],"^Q","Reduces the seq of transactions for a norm into a transaction\n  result accumulator"],"~$has-attribute?",["^ ","^B",null,"^C",["^ ","^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^E",42,"^F",7,"^G",42,"^H",21,"^I",["^J",["^K",["^J",[["^Z","~$attr-name"]]]]],"^Q","Returns true if a database has an attribute named attr-name"],"^7","~$io.rkn.conformity.core/has-attribute?","^S",false,"^D","/home/csmall/code/datsys/checkouts/conformity/src/io/rkn/conformity/core.cljc","^H",21,"^T",["^J",[["^Z","^1U"]]],"^U",null,"^V",["^J",[null,null]],"^F",1,"^E",42,"^G",42,"^W",2,"^X",true,"^I",["^J",["^K",["^J",[["^Z","^1U"]]]]],"^Q","Returns true if a database has an attribute named attr-name"]],"~:require-macros",["^ ","^;","^<","^<","^<"],"~:cljs.analyzer/constants",["^ ","~:seen",["^6",["~:find","~:db/fn","~:db/index","~:where","~$?tx","~:tx-result","~:db.part/user","~:txes-fn","~:db.part/db","~:else","~:db","~:txes","~:db/valueType","~:db.type/keyword","~:conformity.setting/sync-schema-timeout","~$?nv","~$?na","~:db.install/_attribute","~:db.fn/call","~:conformity/conformed-norms","~:datomic","~:confirmity/conformed-norms","~:tx-data","~:reason","^:","~:tx-index","~:ex","~:db.part/tx","~:result","~$$","~:db/cardinality","~:db/doc","~:norm-name","~:db/id","~$?iv","~:db/ident","~:db.type/long","~$?ia","~:db.cardinality/one","~:failed","~:io.rkn.conformity.core/ensure-norm-tx-txfn","~:succeeded","~:in"]],"~:order",["^2C","^1Z","^22","^2V","~$$","^2>","^2=","^2Q","^2N","^21","^2M","^2H","^2?","^1[","^2A","^2O","^2:","^2J","^2K","^20","^26","^2;","^2R","^2P","^2T","^24","^2U","^2S","^2L","^2F","^2E","^2@","^2B","^2D","^23","^29","^25","^2<","^:","^2G","^27","^28","^2I"]],"^Q",null]